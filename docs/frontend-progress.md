# Отчет о прогрессе разработки Frontend-Next

## Решенные проблемы

### 1. Исправлены ошибки с изображениями
Решена проблема с изображениями Next.js. Ранее была ошибка:

```
Error: Invalid src prop (https://via.placeholder.com/400x300?text=Студия) on `next/image`, hostname "via.placeholder.com" is not configured under images in your `next.config.js`
```

**Решение**: В `next.config.js` добавлена конфигурация для доменов изображений:

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: false,
  // Разрешаем импорты с расширениями .jsx
  pageExtensions: ['js', 'jsx'],
  // Конфигурация для изображений
  images: {
    domains: ['via.placeholder.com'],
    formats: ['image/avif', 'image/webp'],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048]
  }
}

module.exports = nextConfig
```

Для долгосрочного решения заменены URL внешних изображений на локальные пути:

```javascript
// Было
image: `https://via.placeholder.com/400x300?text=Квартира_${page}-${index + 1}`,

// Стало
image: `/images/apartments/apartment-${(index % 3) + 1}.jpg`,
```

### 2. Исправлены ошибки авторизации

Ранее была ошибка:
```
AxiosError: Network Error
```

и

```
ApiError: Ошибка при получении информации о пользователе
```

**Решение**: Временно отключены запросы к API в `AuthContext.js` и заменены на моковые данные:

```javascript
// Временно отключаем запрос к API, т.к. бэкенд еще не готов
// const userData = await apiClient.auth.getCurrentUser();
// setUser(userData);

// Используем моковые данные пользователя для тестирования
setUser({
  id: '1',
  name: 'Тестовый пользователь',
  email: 'test@example.com',
  role: 'user'
});
```

### 3. Создана структура для хранения локальных изображений

Создана директория `public/images/apartments/` для хранения изображений квартир.

## Выявленные недочеты при тестировании

В ходе ручного тестирования фронтенда выявлены следующие проблемы, требующие исправления:

### 1. Проблемы с загрузкой изображений

**Описание**: Фотографии квартир не прогружаются корректно на некоторых страницах.

**Причина**: Отсутствие физических файлов изображений в директории `/public/images/apartments/`, на которые происходит ссылка в коде.

**Решение**:
- Создать заглушки изображений в директории `/public/images/apartments/`
- Добавить скрипт для скачивания заглушек изображений при первом запуске проекта
- Обеспечить корректную обработку ошибок загрузки изображений с fallback на стандартное изображение

### 2. Дублирование навигации в хедере

**Описание**: Функциональность кнопки "Замок" дублирует функциональность кнопки "Главная", обе ведут на главную страницу.

**Решение**:
- Преобразовать "Замок" в логотип без ссылки или с отдельной иконкой
- Удалить кликабельность с логотипа "Замок" или перенаправлять по той же ссылке, что и "Главная"
- Рассмотреть возможность объединения "Замок" и "Главная" в единый логотип-ссылку

### 3. Дублирование главной панели

**Описание**: При переходе в раздел "Квартиры" происходит дублирование главной навигационной панели.

**Причина**: В компонентах страниц `/pages/apartments/index.js` и `/components/Header.jsx` дублируется навигационная панель.

**Решение**:
- Изменить структуру компонента, оставив навигацию только в `Header.jsx`
- Вынести общую структуру страницы в компонент `Layout.jsx`, который будет включать единую навигационную панель
- Использовать Next.js Layout Pattern для избежания дублирования UI элементов

### 4. Ошибки при расчете стоимости

**Описание**: При попытке рассчитать стоимость бронирования возникают ошибки в консоли.

**Логи ошибок**:
```
TypeError: Cannot read properties of undefined (reading 'price')
```

**Решение**:
- Добавить проверки наличия объектов перед обращением к их свойствам
- Улучшить обработку случаев, когда данные еще не загружены
- Добавить состояние загрузки для компонента расчета стоимости

## План дальнейших действий

### Приоритет 0: Исправление выявленных недочетов
- ⏳ Решить проблему с загрузкой изображений
- ⏳ Исправить дублирование навигации в хедере
- ⏳ Устранить дублирование главной панели
- ⏳ Исправить ошибки при расчете стоимости

### Приоритет 1: Интеграция с бэкендом
- ⏳ Подключить реальные API-запросы вместо моковых данных
- ⏳ Реализовать кэширование запросов для оптимизации

### Приоритет 2: Улучшение SEO и метаданных
- ⏳ Добавить `_document.js` для улучшения SEO
- ⏳ Настроить динамические метатеги для страниц

### Приоритет 3: Оптимизация
- ⏳ Настроить LazyLoading компонентов
- ⏳ Оптимизировать загрузку изображений

### Приоритет 4: Тестирование
- ⏳ Написать юнит-тесты для основных компонентов
- ⏳ Настроить E2E тестирование