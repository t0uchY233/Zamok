# Руководство по логированию в Zamok

## Обзор

В приложении Zamok настроена система логирования для отслеживания ошибок, предупреждений и информационных сообщений. Это помогает выявлять и устранять проблемы в процессе разработки и эксплуатации.

## Структура логов

Логи сохраняются в следующих местах:
- Файловые логи: `logs/zamok.log`
- Консольные логи: выводятся в стандартный вывод при запуске приложения

## Уровни логирования

В Zamok используются следующие уровни логирования:

- **ERROR** - для критических ошибок, которые мешают работе приложения
- **WARNING** - для предупреждений, которые не останавливают работу, но могут привести к проблемам
- **INFO** - для отслеживания нормальной работы приложения
- **DEBUG** - для детальной отладочной информации (обычно используется только в режиме разработки)

## Как использовать логирование в коде

Для добавления логов в свой код используйте следующий формат:

```python
from app import app

# Пример информационного сообщения
app.logger.info("Пользователь вошел в систему: user_id=%s", user_id)

# Пример предупреждения
app.logger.warning("Количество попыток входа превышено: user=%s", username)

# Пример ошибки
app.logger.error("Не удалось подключиться к Google Sheets: %s", str(error))

# Пример отладочного сообщения (только в режиме разработки)
app.logger.debug("Получены данные: %s", data)
```

### Рекомендации

1. Используйте форматную строку вместо конкатенации: `app.logger.info("Пользователь: %s", username)` вместо `app.logger.info("Пользователь: " + username)`
2. Логируйте все важные операции: аутентификацию, бронирования, платежи и т.д.
3. Всегда заключайте потенциально опасный код в блоки try-except и логируйте исключения

## Доступ к логам

### В режиме разработки
- Файловые логи доступны в папке `logs/` проекта
- Консольные логи отображаются в терминале при запуске приложения

### В production-среде
- Логи сохраняются в файлах с ротацией (до 10 файлов по 10MB)
- На сервере логи можно найти в директории `/путь/к/приложению/logs/`

## Анализ логов

Для анализа логов можно использовать стандартные инструменты командной строки:

```bash
# Показать последние 100 строк логов
tail -n 100 logs/zamok.log

# Найти все ошибки в логах
grep ERROR logs/zamok.log

# Найти логи, связанные с конкретным пользователем
grep "user_id=123" logs/zamok.log
```

## Настройка уровня логирования

По умолчанию, уровень логирования установлен на `INFO`. Чтобы изменить его на `DEBUG` в режиме разработки, установите переменную окружения:

```
FLASK_DEBUG=1
```

## Дополнительные рекомендации

1. Не включайте в логи конфиденциальные данные (пароли, токены и т.д.)
2. Используйте информативные сообщения, включающие контекст операции
3. В сложных операциях логируйте начало и окончание процесса для лучшего отслеживания
4. При возникновении ошибок логируйте все доступные детали, которые помогут воспроизвести проблему 